{% extends 'base.html.twig' %}

{% block title %}Détail du produit{% endblock %}

{% block body %}
<h1>Détail du produit</h1>

{% if app.user %}
    <div class="alert alert-info mb-3">
        Votre solde de points : <strong>{{ app.user.points }}</strong>
    </div>
{% endif %}

<table class="table">
    <tr><th>Nom</th><td>{{ produit.nom }}</td></tr>
    <tr><th>Prix</th><td>{{ produit.prix }} €</td></tr>
    <tr><th>Catégorie</th><td>{{ produit.category }}</td></tr>
    <tr><th>Description</th><td>{{ produit.description }}</td></tr>
    <tr><th>Créé le</th><td>{{ produit.createdAt ? produit.createdAt|date('d/m/Y H:i') : 'N/A' }}</td></tr>
    <tr><th>Mis à jour le</th><td>{{ produit.updatedAt ? produit.updatedAt|date('d/m/Y H:i') : 'N/A' }}</td></tr>
</table>

{% if app.user %}
    <form method="post" action="{{ path('produit_acheter', {'id': produit.id}) }}">
        <input type="hidden" name="_token" value="{{ csrf_token('acheter' ~ produit.id) }}">
        <button class="btn btn-success">Acheter</button>
    </form>
{% else %}
    <a href="{{ path('app_login') }}" class="btn btn-warning">Se connecter pour acheter</a>
{% endif %}

<a href="{{ path('produit_index') }}" class="btn btn-secondary mt-3">Retour à la liste</a>
{% endblock %}
